!function(c){"use strict";var u=u||{};u.init=function(){u.$body=c(document.body),u.$window=c(window),u.$header=c("#masthead"),this.activeHeaderMenu(),this.canvasPanel(),this.menuSideBar(),this.parallax(),this.scrollTop(),this.searchToggle(),this.portfolioLayout(),this.blogMasonryLayout(),this.portfolioLoadingAjax(),this.progressbarShortcode(),this.tabs(),this.widgetOffice(),this.productQuantity(),this.blogLoadingAjax(),this.stickyHeader()},u.parallax=function(){u.$window.width()<1200||c(".page-header.parallax .featured-image").parallax("50%",.6)},u.scrollTop=function(){var e=c("#scroll-top");u.$window.scroll(function(){u.$window.scrollTop()>u.$window.height()?e.addClass("show-scroll"):e.removeClass("show-scroll")}),e.on("click",function(e){e.preventDefault(),c("html, body").stop().animate({scrollTop:0},800)})},u.searchToggle=function(){c(".dl-search-toggle").on("click",function(e){e.preventDefault(),c(this).parent().toggleClass("show-search")})},u.portfolioLayout=function(){var a,e;u.$body.hasClass("delaware-portfolio-isotope")&&(a=c("#delaware_portfolio_grid"),e={itemSelector:".portfolio-wrapper",layoutMode:"masonry"},u.$body.hasClass("portfolio-layout-grid")&&(e={itemSelector:".portfolio-wrapper",layoutMode:"fitRows"}),a.imagesLoaded(function(){a.isotope(e)}),c("#portfolio-cats-filters").on("click","span",function(){var e=c(this).attr("data-filter");c(this).hasClass("active")||(c(this).addClass("active").siblings().removeClass("active"),a.isotope({filter:e}))}))},u.progressbarShortcode=function(){c(".delaware-progressbar").waypoint(function(){c(".delaware-progressbar .line-progress").addClass("animate_progress")},{offset:"100%"})},u.tabs=function(){var a=c(".tab-block-overview"),t=a.find(".tab-nav  li"),n=a.find(".tab-content > .tab-panel");n.not(":first-child").hide(),t.each(function(e){c(this).attr("data-tab","tab"+e)}),n.each(function(e){c(this).attr("data-tab","tab"+e)}),t.on("click",function(){var e=c(this).data("tab");a.find(n).hide(),a.find(n).filter("[data-tab="+e+"]").show()}),c(".tab-nav > li").on("click",function(){var e=c(".tab-nav li.active"),a=t.parent().index();e.removeClass("active"),c(this).addClass("active"),n.filter(":eq("+a+")").addClass("active")})},u.blogMasonryLayout=function(){u.$body.hasClass("blog-masonry")&&c("#masonry_blog_list").imagesLoaded(function(){c("#masonry_blog_list").isotope({itemSelector:".post",layoutMode:"masonry"})})},u.widgetOffice=function(){c(".office-location").each(function(){var e=c(this),t=e.find(".office-switcher ul li"),a=t.filter(":first"),n=e.find(".office-switcher a"),i=e.find(".topbar-office");a.addClass("active"),i.filter(":first").addClass("active"),n.html(a.html()),n.on("click",function(e){var a=c(this);e.preventDefault(),a.parent().toggleClass("show-office")}),t.on("click",function(){var e=c(this),a=e.attr("data-tab");e.hasClass("active")||(n.html(e.html()),n.parent().toggleClass("show-office"),t.removeClass("active"),i.removeClass("active"),e.addClass("active"),c("#"+a).addClass("active"))})})},u.blogLoadingAjax=function(){u.$body.on("click",".blog-nav-ajax a.next",function(e){var i,o;e.preventDefault(),c(this).data("requestRunning")||(c(this).data("requestRunning",!0),c(this).addClass("loading"),i=c(this).closest(".paging-navigation"),o=i.prev(".blog-list"),c.get(c(this).attr("href"),function(e){var a=c(e).find(".blog-list").children(".dl-blog-wrapper"),t=c(e).find(".paging-navigation").html(),n=c(a);i.html(t),u.$body.hasClass("blog-masonry")?n.imagesLoaded(function(){o.append(n).isotope("insert",n),i.find(".page-numbers.next").removeClass("loading"),i.find(".page-numbers.next").data("requestRunning",!1)}):(o.append(n),i.find(".page-numbers.next").removeClass("loading"),i.find(".page-numbers.next").data("requestRunning",!1)),i.find(".page-numbers").hasClass("next")||i.addClass("loaded")}))})},u.productQuantity=function(){u.$body.on("click",".quantity .increase, .quantity .decrease",function(e){e.preventDefault();var a=c(this),t=a.siblings(".qty"),n=parseInt(t.val(),10),i=(i=parseInt(t.attr("min"),10))||1,o=(o=parseInt(t.attr("max"),10))||n+1;a.hasClass("decrease")&&i<n&&(t.val(n-1),t.trigger("change")),a.hasClass("increase")&&n<o&&(t.val(n+1),t.trigger("change"))})},u.portfolioLoadingAjax=function(){u.$body.hasClass("delaware-portfolio")&&u.$body.on("click",".portfolio-nav-ajax a.next",function(e){var n,i;e.preventDefault(),c(this).data("requestRunning")||(c(this).data("requestRunning",!0),c(this).addClass("loading"),n=c(this).closest(".paging-navigation"),i=n.prev("#delaware_portfolio_grid"),c.get(c(this).attr("href"),function(e){var a=c(e).find("#delaware_portfolio_grid").children(".portfolio-wrapper"),t=c(e).find(".paging-navigation").html();n.html(t),i.append(a),a.imagesLoaded(function(){i.isotope("appended",a),n.find(".page-numbers.next").removeClass("loading"),n.find(".page-numbers.next").data("requestRunning",!1)})}))})},u.activeHeaderMenu=function(){var e,a,t,n,i,o,s=u.$header.find("ul.menu");s.find("li:last-child").addClass("last-child"),s.append('<li id="dl-active-menu" class="dl-active-menu"></li>');var r,l=c("#dl-active-menu"),d=0;0<s.children("li.current-menu-item, li.current-menu-ancestor, li.current-menu-parent").length&&(i=s.children("li.current-menu-item, li.current-menu-ancestor, li.current-menu-parent").outerWidth(),t=s.children("li.current-menu-item, li.current-menu-ancestor, li.current-menu-parent").children("a").outerWidth(),r=(i-t/2)/2,t/=2,l.width(t).css("left",s.children("li.current-menu-item, li.current-menu-ancestor, li.current-menu-parent").position().left+r).data("origLeft",l.position().left).data("origWidth",l.width()),d=l.data("origWidth")),s.children("li").on("hover",function(){e=c(this),o=e.outerWidth(),n=e.children("a").outerWidth(),r=(o-n/2)/2,n/=2,a=e.position().left+r,l.stop().animate({left:a,width:n})},function(){l.stop().animate({left:l.data("origLeft"),width:d})})},u.canvasPanel=function(){u.$header.on("click","#icon-menu-mobile",function(e){e.preventDefault(),u.openCanvasPanel(c("#menu-sidebar-panel"))}),u.$body.on("click","#off-canvas-layer, .close-canvas-panel",function(e){e.preventDefault(),u.closeCanvasPanel()})},u.openCanvasPanel=function(e){u.$body.addClass("open-canvas-panel"),e.addClass("open")},u.closeCanvasPanel=function(){u.$body.removeClass("open-canvas-panel"),c(".delaware-off-canvas-panel").removeClass("open")},u.menuSideBar=function(){var e=c("#menu-sidebar-panel");e.find(".menu .menu-item-has-children > a").prepend('<span class="toggle-menu-children"><span class="menu-arrow"></span></span>'),e.find("li.menu-item-has-children > a .toggle-menu-children").on("click",function(e){e.preventDefault(),c(this).closest("li").siblings().find("ul.sub-menu, ul.dropdown-submenu").slideUp(),c(this).closest("li").siblings().removeClass("active"),c(this).closest("li").children("ul.sub-menu, ul.dropdown-submenu").slideToggle(),c(this).closest("li").toggleClass("active")})},u.stickyHeader=function(){u.$body.hasClass("header-sticky")&&(u.$window.on("scroll",function(){var e=u.$window.scrollTop();20+u.$header.outerHeight(!0)+c(".topbar").outerHeight(!0)<e?u.$header.addClass("minimized"):u.$header.removeClass("minimized")}),u.$window.on("resize",function(){var e=u.$header.outerHeight(!0),a=c("#delaware-header-minimized");u.$body.hasClass("header-transparent")||a.height(e)}).trigger("resize"))},c(function(){u.init()})}(jQuery);